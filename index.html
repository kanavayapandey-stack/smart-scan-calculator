<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Scan | Expense to Wealth</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
      margin: 0;
      padding: 0;
    }
    header {
      background: linear-gradient(90deg, #0984e3, #2d3436);
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 1.6rem;
      font-weight: bold;
      letter-spacing: 1px;
    }
    section {
      max-width: 1100px;
      margin: auto;
      padding: 30px 20px;
    }
    h2 {
      color: #0984e3;
      margin-bottom: 10px;
    }
    p {
      color: #2d3436;
      font-size: 1rem;
    }
    .split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 25px;
      margin-top: 20px;
    }
    .card {
      background: white;
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }
    .btn {
      background: linear-gradient(90deg, #0984e3, #00b894);
      border: none;
      color: white;
      padding: 12px 18px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 12px;
    }
    .btn:hover { opacity: 0.9; }
    .preset-buttons button {
      margin: 5px;
      background: #f1f1f1;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
    }
    .preset-buttons button:hover { background: #dfe6e9; }
    #emoji {
      font-size: 60px;
      margin-top: 10px;
      text-align: center;
    }
    /* Jars */
    .jars {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      text-align: center;
    }
    .jar {
      height: 180px;
      border: 3px solid #0984e3;
      border-radius: 12px;
      position: relative;
      overflow: hidden;
      background: #f9f9f9;
    }
    .fill {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 0%;
      transition: height 1.5s ease-in-out;
    }
    .jar:nth-child(1) .fill { background: linear-gradient(180deg, #ff7675, #d63031); }
    .jar:nth-child(2) .fill { background: linear-gradient(180deg, #ffeaa7, #fdcb6e); }
    .jar:nth-child(3) .fill { background: linear-gradient(180deg, #55efc4, #00b894); }

    /* Responsive */
    @media (max-width: 980px) {
      .split { grid-template-columns: 1fr; }
      .jars { grid-template-columns: 1fr; }
    }
    @media (max-width: 600px) {
      body { font-size: 15px; }
      h1 { font-size: 1.2rem; }
      .card { padding: 14px; }
      input, select, .btn { font-size: 0.9rem; padding: 9px 10px; }
      #resultCanvas { height: 220px !important; }
      .jars { gap: 12px; }
      .jar { height: 140px; }
    }
  </style>
</head>
<body>
  <header>💰 Smart Scan — Expense to Wealth</header>

  <!-- About -->
  <section>
    <h2>About</h2>
    <p>Smart Scan is an interactive financial literacy tool for teens. It shows how small daily expenses, when saved and invested, can turn into wealth over time.</p>
  </section>

  <!-- Motive -->
  <section>
    <h2>Our Motive</h2>
    <p>We want to inspire young people to think wisely about money. Each choice—whether spending or saving—shapes their financial future.</p>
  </section>

  <!-- Jars -->
  <section>
    <h2>The 3 Jars of Money</h2>
    <div class="jars">
      <div>
        <div class="jar"><div class="fill" id="jarSpend"></div></div>
        <p>Spending</p>
      </div>
      <div>
        <div class="jar"><div class="fill" id="jarSave"></div></div>
        <p>Saving</p>
      </div>
      <div>
        <div class="jar"><div class="fill" id="jarWealth"></div></div>
        <p>Wealth</p>
      </div>
    </div>
  </section>

  <!-- Calculator -->
  <section>
    <h2>Expense to Wealth Calculator</h2>
    <div class="split">
      <!-- Left: Form -->
      <div class="card">
        <label>Mode:</label>
        <select id="type">
          <option value="spend">Spending</option>
          <option value="save">Saving</option>
        </select><br><br>

        <label>Title:</label>
        <input id="title" type="text" value="Coffee ☕" /><br><br>

        <label>Amount (₹):</label>
        <input id="amount" type="number" value="60" /><br><br>

        <label>Frequency (days/year):</label>
        <input id="freq" type="number" value="365" /><br><br>

        <label>Years:</label>
        <input id="years" type="range" min="1" max="50" value="25" oninput="document.getElementById('yrsLabel').innerText=this.value" />
        <span id="yrsLabel">25</span> years<br><br>

        <button class="btn" onclick="calculate()">Calculate</button>

        <div class="preset-buttons">
          <button onclick="prefill('Coffee ☕',60,365,'spend')">Coffee ₹60/day</button>
          <button onclick="prefill('Chips 🍟',10,365,'spend')">Chips ₹10/day</button>
          <button onclick="prefill('Movie 🎬',300,12,'spend')">Movie ₹300/month</button>
          <button onclick="prefill('College Fund 🎓',50000,1,'save')">College ₹50k/year</button>
        </div>
      </div>

      <!-- Right: Chart -->
      <div class="card">
        <canvas id="resultCanvas"></canvas>
        <div id="message"></div>
        <div id="calculation"></div>
        <div id="emoji"></div>
      </div>
    </div>
  </section>

  <footer style="text-align:center; padding:20px; margin-top:30px; background:#0984e3; color:white; font-weight:bold;">
    Smart Scan | CBSE Skill Expo | DPSG
  </footer>

  <script>
    let chart;

    // prefill form
    function prefill(title, amount, freq, type) {
      document.getElementById("title").value = title;
      document.getElementById("amount").value = amount;
      document.getElementById("freq").value = freq;
      document.getElementById("type").value = type;
      calculate();
    }

    function calculate() {
      const type = document.getElementById("type").value;
      const title = document.getElementById("title").value;
      const amount = parseFloat(document.getElementById("amount").value);
      const freq = parseInt(document.getElementById("freq").value);
      const years = parseInt(document.getElementById("years").value);
      const rate = 0.07;

      const yearly = type === "spend" ? amount * freq : amount;
      const future = yearly * ((Math.pow(1 + rate, years) - 1) / rate);

      document.getElementById("message").innerHTML = 
        type === "spend" 
        ? `If you invested instead of spending <b>₹${yearly.toLocaleString('en-IN')}</b> yearly, in ${years} years you'd have <span style="color:#0984e3">₹${future.toLocaleString('en-IN')}</span>.`
        : `Your saving of <b>₹${yearly.toLocaleString('en-IN')}</b> yearly will grow to <span style="color:#00b894">₹${future.toLocaleString('en-IN')}</span> in ${years} years!`;

      document.getElementById("emoji").innerText = type === "spend" ? "🤔" : "🎉";

      // Detailed calculation
      document.getElementById("calculation").innerHTML = `
        <p><b>Calculation:</b><br>
        • Yearly = ₹${yearly}<br>
        • Years = ${years}<br>
        • Rate = ${(rate*100).toFixed(1)}%<br>
        • FV = ${yearly} × ((1+${rate})^${years} - 1)/${rate}<br>
        • Final Value = ₹${future.toLocaleString('en-IN')}
        </p>
      `;

      // Chart
      const ctx = document.getElementById("resultCanvas").getContext("2d");
      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Yearly", `After ${years} yrs`],
          datasets: [{
            data: [yearly, future],
            backgroundColor: type === "spend" ? ["#ff7675","#00b894"] : ["#0984e3","#fdcb6e"],
            borderRadius: 8
          }]
        },
        options: { responsive: true, plugins: { legend: { display:false } }, scales: { y: { beginAtZero: true } } }
      });

      // Update Jars dynamically
      let spendPct = type === "spend" ? 80 : 20;
      let savePct = type === "save" ? 60 : 30;
      let wealthPct = Math.min(100, (future/yearly/years) * 10);

      document.getElementById("jarSpend").style.height = spendPct+"%";
      document.getElementById("jarSave").style.height = savePct+"%";
      document.getElementById("jarWealth").style.height = wealthPct+"%";
    }

    // Prefill from QR code (URL params)
    function getParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }
    window.onload = () => {
      if (getParam("title")) {
        document.getElementById("title").value = getParam("title");
        document.getElementById("amount").value = getParam("amount");
        document.getElementById("freq").value = getParam("freq");
        document.getElementById("type").value = getParam("type");
        document.getElementById("years").value = getParam("years") || 25;
        calculate();
      }
    };
  </script>
</body>
</html>
